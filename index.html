<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="MTB-kartta demo">
    <meta name="author" content="Tapio K.">
    <title>MTB-kartta demo</title>

    <script src="./MTB-kartta_demo/leaflet/leaflet-src.js"></script>        <!--  For map display -->
    <script src="./MTB-kartta_demo/scripts/jquery-3.1.1.min.js"></script>   <!--  For styling tile layers with css -->
    <link rel="stylesheet" href="./MTB-kartta_demo/leaflet/leaflet.css"/>
    <link rel="stylesheet" href="./MTB-kartta_demo/scripts/MTB-kartta.css"/>
  </head>
  <body>
    <!-- Map screen -->
    <div id="map" style="height: 100%; width: 100%"></div>

    <!-- Map display -->
    <script type="text/javascript">

    var	mtb	= L.tileLayer('./MTB-tiles_full/{z}/{x}/{y}.png', {
          id:'MTB-map',
          minZoom:14,
          minNativeZoom:14,
          maxZoom:16,
          maxNativeZoom:16
        }),
        mml	= L.tileLayer('http://tiles.kartat.kapsi.fi/peruskartta/{z}/{x}/{y}.jpg', {
          id:'NLS-map',
          maxZoom:16,
          maxNativeZoom:16
        }),
        ctr	= L.tileLayer('https://wmts.mapant.fi/wmts_EPSG3857.php?z={z}&x={x}&y={y}&style=contours', {
          id:'Contours',
          maxZoom:16,
          maxNativeZoom:16
        }),
        txt = L.tileLayer('./MTB-tiles_textnotes/{z}/{x}/{y}.png', {
          id:'mtb:description-notes',
          maxZoom:16,
          maxNativeZoom:16
        }),
        pth	= L.tileLayer('./MTB-tiles_polut/{z}/{x}/{y}.png', {
          id:'Paths only',
          maxZoom:16,
          maxNativeZoom:16
        });


    // Defining the layer(group)s for the layercontrol and creating the control
    var baseLayers = {
      "MTB-map":mtb,
      "NLS-map":mml,
    };
    var overlayMaps = {
      "Contours":ctr,
      "mtb:description-notes":txt,
      "Paths only":pth,
    };

    // Creating the main map, with mtb-layer as default
    var map = L.map('map', {
      center:[61.4803, 23.5012],
      zoom:15,
      layers:[mtb]
    });

    // Adding the layer control panel
    var layerControl = L.control.layers( baseLayers, overlayMaps, {visible:true, position:'topright', collapsed:false, });
    map.addControl(layerControl);

    $(".leaflet-control-layers-overlays").prepend("<label>&nbsp;Overlays:</label>");

    // Apply overlay layer blending options from CSS when the layer is added, remove when layer is removed.
    map.on("overlayadd", function (event) {
      $(ctr.getContainer()).addClass('ctrBlending');
      $(mml.getContainer()).addClass('mmlBlending');
    });
    map.on("overlayremove", function (event) {
      $(ctr.getContainer()).removeClass('ctrBlending');
      $(mml.getContainer()).removeClass('mmlBlending');
    });

    </script>
  </body>
</html>
